<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scanbox Admin — Articole Blog</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Inter',sans-serif;background:#0D1B2A;color:#fff;min-height:100vh;display:flex}
a{text-decoration:none;color:inherit}

.sidebar{width:260px;background:rgba(255,255,255,0.03);border-right:1px solid rgba(255,255,255,0.06);padding:24px 16px;flex-shrink:0;display:flex;flex-direction:column}
.sidebar-logo{font-size:20px;font-weight:800;padding:8px 12px;margin-bottom:32px;display:flex;align-items:center;gap:8px}
.sidebar-logo span{width:32px;height:32px;background:linear-gradient(135deg,#04B494,#039B7E);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:16px}
.sidebar nav a{display:flex;align-items:center;gap:12px;padding:12px 16px;border-radius:12px;font-size:14px;font-weight:500;color:#94A3B8;transition:all 0.2s;margin-bottom:4px}
.sidebar nav a:hover,.sidebar nav a.active{background:rgba(4,180,148,0.1);color:#fff}
.sidebar nav a.active{border-left:3px solid #04B494}
.sidebar nav a svg{width:18px;height:18px;stroke:currentColor;fill:none;stroke-width:2}
.sidebar-footer{margin-top:auto;padding:16px;border-top:1px solid rgba(255,255,255,0.06)}
.sidebar-footer a{font-size:13px;color:#94A3B8}

.main{flex:1;padding:32px;overflow-y:auto}
.main h1{font-size:28px;font-weight:700;margin-bottom:8px}
.subtitle{color:#94A3B8;font-size:15px;margin-bottom:24px}

.toolbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}
.btn{padding:10px 24px;border-radius:12px;font-family:'Inter',sans-serif;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.3s;border:none}
.btn-primary{background:linear-gradient(90deg,#04B494,#039B7E);color:#fff}
.btn-secondary{background:rgba(255,255,255,0.05);color:#fff;border:1px solid rgba(255,255,255,0.1)}
.btn-danger{background:rgba(239,68,68,0.15);color:#ef4444;border:1px solid rgba(239,68,68,0.2)}
.btn:hover{transform:translateY(-1px)}
.btn-group{display:flex;gap:8px}

.card{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.06);border-radius:20px;padding:24px;margin-bottom:24px}

/* Posts list */
.post-item{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid rgba(255,255,255,0.04);transition:background 0.2s}
.post-item:hover{background:rgba(255,255,255,0.02)}
.post-item:last-child{border-bottom:none}
.post-title{font-weight:600;font-size:15px;margin-bottom:4px}
.post-meta{font-size:12px;color:#94A3B8}
.badge{display:inline-block;padding:3px 10px;border-radius:20px;font-size:11px;font-weight:600}
.badge-green{background:rgba(4,180,148,0.15);color:#04B494}
.badge-yellow{background:rgba(234,179,8,0.15);color:#eab308}

/* Editor */
.editor-panel{display:none}
.editor-panel.active{display:block}

.form-group{margin-bottom:20px}
.form-group label{display:block;font-size:14px;font-weight:500;color:#94A3B8;margin-bottom:8px}
.form-group input,.form-group textarea,.form-group select{width:100%;padding:14px 18px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:14px;color:#fff;font-family:'Inter',sans-serif;font-size:15px}
.form-group input:focus,.form-group textarea:focus,.form-group select:focus{outline:none;border-color:rgba(4,180,148,0.5)}
.form-group textarea{min-height:300px;resize:vertical;line-height:1.7}
.form-group select option{background:#1A2B4A;color:#fff}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:16px}

@media(max-width:768px){.sidebar{display:none}.form-row{grid-template-columns:1fr}}
</style>
</head>
<body>

<aside class="sidebar">
  <div class="sidebar-logo"><span>S</span> Admin</div>
  <nav>
    <a href="index.html"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg> Dashboard</a>
    <a href="blog-editor.html" class="active"><svg viewBox="0 0 24 24"><path d="M12 20h9M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z"/></svg> Articole Blog</a>
    <a href="gallery.html"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg> Galerie & Conținut</a>
  </nav>
  <div class="sidebar-footer"><a href="../">← Înapoi la site</a></div>
</aside>

<div class="main">
  <!-- LIST VIEW -->
  <div id="listView">
    <h1>Articole Blog</h1>
    <p class="subtitle">Gestionează articolele de pe blog</p>
    <div class="toolbar">
      <span id="postCount" style="color:#94A3B8;font-size:14px">0 articole</span>
      <button class="btn btn-primary" onclick="newPost()">+ Articol Nou</button>
    </div>
    <div class="card" id="postsList"></div>
  </div>

  <!-- EDITOR VIEW -->
  <div id="editorView" class="editor-panel">
    <div class="toolbar">
      <h1 id="editorTitle">Articol Nou</h1>
      <div class="btn-group">
        <button class="btn btn-secondary" onclick="showList()">← Înapoi</button>
        <button class="btn btn-danger" id="deleteBtn" onclick="deletePost()" style="display:none">Șterge</button>
        <button class="btn btn-primary" onclick="savePost()">Salvează</button>
      </div>
    </div>
    <div class="card">
      <input type="hidden" id="postId">
      <div class="form-group">
        <label>Titlu articol</label>
        <input type="text" id="postTitleInput" placeholder="Ex: 5 Motive să alegi un tur virtual 3D">
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Categorie</label>
          <select id="postCategory">
            <option value="tur-virtual">Tur Virtual 3D</option>
            <option value="fotografie">Fotografie</option>
            <option value="videografie">Videografie</option>
            <option value="social-media">Social Media</option>
            <option value="matterport">Matterport</option>
            <option value="general">General</option>
          </select>
        </div>
        <div class="form-group">
          <label>Status</label>
          <select id="postStatus">
            <option value="draft">Ciornă</option>
            <option value="published">Publicat</option>
          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Data publicării</label>
          <input type="date" id="postDate">
        </div>
        <div class="form-group">
          <label>URL imagine principală</label>
          <input type="text" id="postImage" placeholder="https://...">
        </div>
      </div>
      <div class="form-group">
        <label>Slug (URL)</label>
        <input type="text" id="postSlug" placeholder="se-genereaza-automat">
      </div>
      <div class="form-group">
        <label>Rezumat</label>
        <input type="text" id="postExcerpt" placeholder="Descriere scurtă pentru listare">
      </div>
      <div class="form-group">
        <label>Conținut (HTML)</label>
        <textarea id="postContent" placeholder="Scrie conținutul articolului aici..."></textarea>
      </div>
    </div>
  </div>
</div>

<script>
const STORAGE_KEY='scanbox_blog_posts';

function getPosts(){return JSON.parse(localStorage.getItem(STORAGE_KEY)||'[]')}
function savePosts(posts){localStorage.setItem(STORAGE_KEY,JSON.stringify(posts))}

function renderList(){
  const posts=getPosts();
  document.getElementById('postCount').textContent=posts.length+' articole';
  const el=document.getElementById('postsList');
  if(!posts.length){el.innerHTML='<p style="text-align:center;color:#94A3B8;padding:32px">Niciun articol încă. Apasă „+ Articol Nou" pentru a crea primul articol.</p>';return}
  el.innerHTML=posts.map((p,i)=>`
    <div class="post-item">
      <div>
        <div class="post-title">${p.title}</div>
        <div class="post-meta">${p.category||'General'} · ${p.date||'Fără dată'} · <span class="badge ${p.status==='published'?'badge-green':'badge-yellow'}">${p.status==='published'?'Publicat':'Ciornă'}</span></div>
      </div>
      <button class="btn btn-secondary" onclick="editPost(${i})" style="font-size:13px;padding:8px 16px">Editează</button>
    </div>
  `).join('');
}

function showList(){
  document.getElementById('listView').style.display='block';
  document.getElementById('editorView').classList.remove('active');
  renderList();
}

function showEditor(){
  document.getElementById('listView').style.display='none';
  document.getElementById('editorView').classList.add('active');
}

function newPost(){
  document.getElementById('editorTitle').textContent='Articol Nou';
  document.getElementById('deleteBtn').style.display='none';
  document.getElementById('postId').value='';
  document.getElementById('postTitleInput').value='';
  document.getElementById('postCategory').value='general';
  document.getElementById('postStatus').value='draft';
  document.getElementById('postDate').value=new Date().toISOString().split('T')[0];
  document.getElementById('postImage').value='';
  document.getElementById('postSlug').value='';
  document.getElementById('postExcerpt').value='';
  document.getElementById('postContent').value='';
  showEditor();
}

function editPost(index){
  const posts=getPosts();
  const p=posts[index];
  document.getElementById('editorTitle').textContent='Editează Articolul';
  document.getElementById('deleteBtn').style.display='inline-block';
  document.getElementById('postId').value=index;
  document.getElementById('postTitleInput').value=p.title||'';
  document.getElementById('postCategory').value=p.category||'general';
  document.getElementById('postStatus').value=p.status||'draft';
  document.getElementById('postDate').value=p.date||'';
  document.getElementById('postImage').value=p.image||'';
  document.getElementById('postSlug').value=p.slug||'';
  document.getElementById('postExcerpt').value=p.excerpt||'';
  document.getElementById('postContent').value=p.content||'';
  showEditor();
}

function savePost(){
  const posts=getPosts();
  const id=document.getElementById('postId').value;
  const title=document.getElementById('postTitleInput').value.trim();
  if(!title){alert('Titlul este obligatoriu');return}
  const slug=document.getElementById('postSlug').value||title.toLowerCase().replace(/[^a-z0-9ăîâșț]+/gi,'-').replace(/-+$/,'');
  const post={
    title,
    slug,
    category:document.getElementById('postCategory').value,
    status:document.getElementById('postStatus').value,
    date:document.getElementById('postDate').value,
    image:document.getElementById('postImage').value,
    excerpt:document.getElementById('postExcerpt').value,
    content:document.getElementById('postContent').value,
    updatedAt:new Date().toISOString()
  };
  if(id!==''){posts[parseInt(id)]=post}else{posts.push(post)}
  savePosts(posts);
  showList();
}

function deletePost(){
  if(!confirm('Sigur vrei să ștergi acest articol?'))return;
  const posts=getPosts();
  const id=parseInt(document.getElementById('postId').value);
  posts.splice(id,1);
  savePosts(posts);
  showList();
}

// Auto-generate slug from title
document.getElementById('postTitleInput').addEventListener('input',function(){
  if(!document.getElementById('postId').value){
    document.getElementById('postSlug').value=this.value.toLowerCase().replace(/[^a-z0-9ăîâșț\s]+/gi,'').replace(/\s+/g,'-');
  }
});

if(!sessionStorage.getItem('scanbox_auth')){window.location.href='index.html'}
renderList();
</script>
</body>
</html>
